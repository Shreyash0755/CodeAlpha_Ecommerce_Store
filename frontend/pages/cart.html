<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shopping Cart | PrimeCart</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>

<header class="navbar">
  <h1 class="logo">PrimeCart</h1>
  <div class="nav-actions" id="navActions"></div>

    <a href="../index.html">Home</a>
    <a href="cart.html">Cart</a>
    <a href="orders.html">My Orders</a>
    

  </div>
</header>

<main class="container cart-page">
  <h2>Your Cart</h2>

  <div class="cart-wrapper">

    <!-- CART ITEMS -->
    <div class="cart-items" id="cartItems"></div>

    <!-- ORDER SUMMARY -->
   <div class="cart-summary">
  <h3>Order Summary</h3>

  <div class="summary-row">
    <span>Subtotal</span>
    <span id="subtotal">₹0</span>
  </div>

  <div class="summary-row">
    <span>SGST (9%)</span>
    <span id="sgst">₹0</span>
  </div>

  <div class="summary-row">
    <span>CGST (9%)</span>
    <span id="cgst">₹0</span>
  </div>

  <div class="summary-row">
    <span>Delivery Charges</span>
    <span id="delivery">₹49</span>
  </div>

  <div class="summary-row total">
    <span>Total</span>
    <span id="total">₹0</span>
  </div>

  <a href="checkout.html">
    <button class="primary-btn full">Proceed to Checkout</button>
  </a>
</div>


  </div>
</main>

<!-- SCRIPTS -->
<script src="../js/cart.js"></script>
<script src="../js/auth.js"></script>

<script>
  function renderCart() {
    const items = getCart();
    const wrap = document.getElementById("cartItems");

    wrap.innerHTML = "";

    if (!items.length) {
      wrap.innerHTML = "<p>Your cart is empty.</p>";
      updateSummary();
      return;
    }

    items.forEach(item => {
      const div = document.createElement("div");
      div.className = "cart-item";

      div.innerHTML = `
        <img src="${item.image}" alt="${item.name}" />

        <div class="item-info">
          <h4>${item.name}</h4>
          <p class="price">₹${item.price}</p>
        </div>

        <div class="quantity">
          <button class="qty-btn" onclick="updateQty('${item.id}', -1)">−</button>
          <span>${item.qty}</span>
          <button class="qty-btn" onclick="updateQty('${item.id}', 1)">+</button>
        </div>

        <p class="item-total">₹${item.price * item.qty}</p>

        <button class="remove-btn" onclick="removeFromCart('${item.id}')">✕</button>
      `;

      wrap.appendChild(div);
    });

    updateSummary();
  }

  function updateSummary() {
  const items = getCart();
  let subtotal = 0;

  items.forEach(item => {
    subtotal += item.price * item.qty;
  });

  const sgst = subtotal * 0.09;
  const cgst = subtotal * 0.09;
  const deliveryCharge = items.length ? 49 : 0;

  const total = subtotal + sgst + cgst + deliveryCharge;

  document.getElementById("subtotal").innerText = `₹${subtotal.toFixed(0)}`;
  document.getElementById("sgst").innerText = `₹${sgst.toFixed(0)}`;
  document.getElementById("cgst").innerText = `₹${cgst.toFixed(0)}`;
  document.getElementById("delivery").innerText = `₹${deliveryCharge}`;
  document.getElementById("total").innerText = `₹${total.toFixed(0)}`;
}


  renderCart();
</script>

</body>
</html>
